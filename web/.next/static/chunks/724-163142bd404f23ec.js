"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[724],{4724:function(e,t,r){r.d(t,{Z:function(){return x}});var s=r(7437),n=r(1396),a=r.n(n),o=r(2265),i=r(7009),l=r(5787),c=r(826),d=r(5131);function u(e){var t,r,n;let{productId:u,isOpen:h,onClose:x}=e,[m,g]=(0,o.useState)(null),[p,f]=(0,o.useState)([]),[v,y]=(0,o.useState)(null),[b,j]=(0,o.useState)(""),[w,k]=(0,o.useState)(1),[N,S]=(0,o.useState)(!1),{showToast:L}=(0,i.p)();(0,o.useEffect)(()=>{h&&u&&C()},[h,u]);let C=async()=>{S(!0);try{let r=await c.x.getProduct(u);if(r.data){g(r.data.product);let s=r.data.variants||[];if(f(s),s.length>0){var e,t;y(s[0]),j((null===(t=s[0])||void 0===t?void 0:null===(e=t.images)||void 0===e?void 0:e[0])||"")}}}catch(e){console.error("Failed to load product:",e),L("Failed to load product","error")}finally{S(!1)}};if(!m)return(0,s.jsx)(l.Z,{isOpen:h,onClose:x,size:"lg",children:(0,s.jsx)("div",{className:"flex items-center justify-center py-12",children:N?(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Loading product..."})]}):(0,s.jsx)("div",{className:"text-center",children:(0,s.jsx)("p",{className:"text-gray-600",children:"Product not found"})})})});let I=b||(null===(r=p[0])||void 0===r?void 0:null===(t=r.images)||void 0===t?void 0:t[0])||"",M=(null==v?void 0:v.price)||(null===(n=p[0])||void 0===n?void 0:n.price)||0;return(0,s.jsx)(l.Z,{isOpen:h,onClose:x,size:"xl",showCloseButton:!0,children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsx)("div",{className:"aspect-square bg-gray-100 rounded-lg overflow-hidden",children:I?(0,s.jsx)("img",{src:I,alt:m.name,className:"w-full h-full object-cover"}):(0,s.jsx)("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:(0,s.jsx)("svg",{className:"w-20 h-20",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})})}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:m.name}),m.brand&&(0,s.jsxs)("p",{className:"text-sm text-gray-600 mb-2",children:["Brand: ",m.brand]}),m.categoryId&&(0,s.jsxs)("p",{className:"text-sm text-gray-600 mb-4",children:["Category: ",m.categoryId.name]})]}),(0,s.jsx)("div",{className:"flex items-center gap-4",children:(0,s.jsx)("span",{className:"text-3xl font-bold text-gray-900",children:(0,d.xG)(M)})}),m.shortDescription&&(0,s.jsx)("div",{children:(0,s.jsx)("p",{className:"text-gray-700 leading-relaxed",children:m.shortDescription})}),p.length>1&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Variant"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:p.map(e=>(0,s.jsxs)("button",{onClick:()=>{var t;y(e),j((null===(t=e.images)||void 0===t?void 0:t[0])||"")},className:"px-4 py-2 rounded-lg border transition-colors ".concat((null==v?void 0:v._id)===e._id?"border-gray-900 bg-gray-900 text-white":"border-gray-300 text-gray-700 hover:border-gray-900"),children:[(0,d.xG)(e.price),e.sku&&" - ".concat(e.sku)]},e._id))})]}),m.isBundle&&m.bundleItems&&m.bundleItems.length>0&&(0,s.jsxs)("div",{className:"border-t pt-4",children:[(0,s.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"This set includes:"}),(0,s.jsx)("ul",{className:"list-disc list-inside space-y-1 text-sm text-gray-600",children:m.bundleItems.map((e,t)=>(0,s.jsxs)("li",{children:[e.name," ",e.quantity>1&&"(x".concat(e.quantity,")")]},t))})]}),p.length>0&&(0,s.jsxs)("div",{className:"space-y-4 pt-4 border-t",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Quantity:"}),(0,s.jsxs)("div",{className:"flex items-center border border-gray-300 rounded-lg",children:[(0,s.jsx)("button",{onClick:()=>k(Math.max(1,w-1)),className:"px-3 py-2 text-gray-600 hover:text-gray-900",children:"âˆ’"}),(0,s.jsx)("span",{className:"px-4 py-2 border-x border-gray-300 min-w-[60px] text-center",children:w}),(0,s.jsx)("button",{onClick:()=>k(w+1),className:"px-3 py-2 text-gray-600 hover:text-gray-900",children:"+"})]})]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("button",{onClick:()=>{if(!v||!m)return;let e=JSON.parse(localStorage.getItem("cart")||"[]"),t={id:"".concat(m._id,"-").concat(v._id),productId:m._id,variantId:v._id,name:m.name,price:(0,d.xG)(v.price),image:b,quantity:w,variant:v},r=e.findIndex(e=>e.id===t.id);r>=0?e[r].quantity+=w:e.push(t),localStorage.setItem("cart",JSON.stringify(e)),window.dispatchEvent(new Event("cartUpdated")),L("Added to cart!","success")},className:"flex-1 bg-gray-900 text-white px-6 py-3 rounded-lg font-semibold hover:bg-primary transition-colors",children:"Add to Cart"}),(0,s.jsx)(a(),{href:"/products/".concat(u),onClick:x,className:"px-6 py-3 border border-gray-900 text-gray-900 rounded-lg font-semibold hover:bg-gray-50 transition-colors",children:"View Details"})]})]})]})]})})}var h=r(9110);function x(e){let{id:t,name:r,price:n,image:l,labels:c=[],buttonText:d="Add",isOutOfStock:x=!1,href:m,productId:g,rating:p=4.5,reviewCount:f=12}=e,[v,y]=(0,o.useState)(!1),[b,j]=(0,o.useState)(!1),[w,k]=(0,o.useState)(!1),N=m||"/products/".concat(t),S=g||t,{showToast:L}=(0,i.p)();return(0,o.useEffect)(()=>{k((0,h.QY)(S));let e=()=>{k((0,h.QY)(S))};return window.addEventListener("wishlistUpdated",e),()=>window.removeEventListener("wishlistUpdated",e)},[S]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a(),{href:N,className:"block group",children:(0,s.jsxs)("div",{className:"relative bg-white rounded-xl overflow-hidden shadow-sm hover:shadow-xl transition-all duration-300 border border-gray-100",onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1),children:[(0,s.jsxs)("div",{className:"relative aspect-[3/4] bg-gray-50 overflow-hidden",children:[l?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"w-full h-full bg-cover bg-center transition-transform duration-700 group-hover:scale-110",style:{backgroundImage:"url(".concat(l,")")}}),(0,s.jsx)("button",{onClick:e=>{e.preventDefault(),e.stopPropagation(),w?((0,h.$f)(S),L("Removed from wishlist","success")):(0,h.Mp)({id:S,name:r,price:n,image:l,productId:S})?L("Added to wishlist","success"):L("Already in wishlist","info")},className:"absolute top-2 right-2 p-2 rounded-full transition-all duration-300 z-20 ".concat(w?"bg-red-50 text-red-500 hover:bg-red-100":"bg-white/80 backdrop-blur-sm text-gray-500 hover:bg-white hover:text-red-500 hover:shadow-md"," ").concat(w||v?"opacity-100 translate-x-0":"lg:opacity-0 lg:translate-x-2"),title:w?"Remove from Wishlist":"Add to Wishlist",children:(0,s.jsx)("svg",{className:"w-4 h-4 ".concat(w?"fill-current":"fill-none stroke-current stroke-2"),viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})}),(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none transition-opacity duration-300 ".concat(v?"opacity-100":"opacity-0"),children:(0,s.jsx)("div",{onClick:e=>{e.preventDefault(),e.stopPropagation(),j(!0)},className:"pointer-events-auto cursor-pointer bg-white text-gray-900 px-4 py-2 rounded-full font-semibold shadow-lg hover:bg-gray-900 hover:text-white transition-colors transform hover:scale-105 active:scale-95 text-xs tracking-wide uppercase",children:"Quick View"})}),c.length>0&&(0,s.jsx)("div",{className:"absolute top-2 left-2 flex flex-col gap-1 z-10",children:c.map((e,t)=>{let r=e.toLowerCase(),n="bg-gray-900";return r.includes("sale")?n="bg-red-500":r.includes("new")?n="bg-blue-600":r.includes("limited")&&(n="bg-purple-600"),(0,s.jsx)("span",{className:"".concat(n," text-white text-[10px] font-bold px-2 py-0.5 rounded shadow-sm uppercase tracking-wider"),children:e},t)})})]}):(0,s.jsx)("div",{className:"w-full h-full flex items-center justify-center text-gray-300",children:(0,s.jsx)("svg",{className:"w-12 h-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),x&&(0,s.jsx)("div",{className:"absolute inset-0 bg-white/60 flex items-center justify-center z-10",children:(0,s.jsx)("span",{className:"bg-gray-900 text-white text-xs font-bold px-3 py-1 rounded-full uppercase tracking-wider",children:"Out of Stock"})})]}),(0,s.jsxs)("div",{className:"p-3",children:[(0,s.jsx)("div",{className:"flex justify-between items-start gap-2 mb-1",children:(0,s.jsx)("h3",{className:"text-sm font-medium text-gray-900 leading-tight line-clamp-2 group-hover:text-primary transition-colors",children:r})}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)("div",{className:"flex items-center space-x-0.5 text-yellow-400",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,s.jsx)("svg",{className:"w-3 h-3 ".concat(t<Math.floor(p)?"fill-current":"text-gray-300 fill-current"),viewBox:"0 0 20 20",children:(0,s.jsx)("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},t))}),(0,s.jsxs)("span",{className:"text-[10px] text-gray-400",children:["(",f,")"]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between mt-2",children:[(0,s.jsx)("div",{className:"text-base font-bold text-gray-900",children:n}),(0,s.jsx)("button",{onClick:e=>{if(e.preventDefault(),e.stopPropagation(),x)L("This product is out of stock","warning");else{let e=JSON.parse(localStorage.getItem("cart")||"[]"),s=e.find(e=>e.id===t);s?(s.quantity+=1,L("".concat(r," quantity updated"),"success")):(e.push({id:t,name:r,price:n,image:l,quantity:1}),L("".concat(r," added to cart"),"success")),localStorage.setItem("cart",JSON.stringify(e)),window.dispatchEvent(new Event("cartUpdated"))}},disabled:x,className:"p-2 rounded-full transition-all duration-300 ".concat(x?"bg-gray-100 text-gray-300":"bg-gray-100 text-gray-900 hover:bg-primary hover:text-white hover:shadow-lg hover:-translate-y-0.5"),title:d,children:(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})})})]})]})]})}),(0,s.jsx)(u,{productId:S,isOpen:b,onClose:()=>j(!1)})]})}},5787:function(e,t,r){r.d(t,{Z:function(){return a}});var s=r(7437),n=r(2265);function a(e){let{isOpen:t,onClose:r,title:a,children:o,size:i="md",showCloseButton:l=!0}=e;return((0,n.useEffect)(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[t]),(0,n.useEffect)(()=>{let e=e=>{"Escape"===e.key&&t&&r()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[t,r]),t)?(0,s.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",onClick:r,children:(0,s.jsxs)("div",{className:"flex min-h-screen items-center justify-center p-4",children:[(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 transition-opacity",onClick:r}),(0,s.jsxs)("div",{className:"\n            relative bg-white rounded-xl shadow-2xl w-full ".concat({sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"}[i],"\n            transform transition-all animate-fadeIn\n          "),onClick:e=>e.stopPropagation(),children:[(a||l)&&(0,s.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[a&&(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:a}),l&&(0,s.jsx)("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors p-1 rounded-lg hover:bg-gray-100","aria-label":"Close modal",children:(0,s.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,s.jsx)("div",{className:"p-6",children:o})]})]})}):null}},4804:function(e,t,r){r.d(t,{Z:function(){return a}});var s=r(7437),n=r(2265);function a(e){let{message:t,type:r="info",isVisible:a,onClose:o,duration:i=3e3}=e;if((0,n.useEffect)(()=>{if(a&&i>0){let e=setTimeout(()=>{o()},i);return()=>clearTimeout(e)}},[a,i,o]),!a)return null;let l={success:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),error:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),warning:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),info:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})};return(0,s.jsxs)("div",{className:"\n        fixed top-4 right-4 z-50\n        flex items-center gap-3 px-4 py-3 rounded-lg shadow-lg border\n        animate-fadeIn transform transition-all\n        ".concat({success:"bg-green-50 border-green-200 text-green-800",error:"bg-red-50 border-red-200 text-red-800",warning:"bg-yellow-50 border-yellow-200 text-yellow-800",info:"bg-blue-50 border-blue-200 text-blue-800"}[r],"\n      "),children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:l[r]}),(0,s.jsx)("p",{className:"flex-1 font-medium",children:t}),(0,s.jsx)("button",{onClick:o,className:"flex-shrink-0 text-current opacity-70 hover:opacity-100 transition-opacity","aria-label":"Close notification",children:(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}},7009:function(e,t,r){r.d(t,{V:function(){return l},p:function(){return i}});var s=r(7437),n=r(2265),a=r(4804);let o=(0,n.createContext)(void 0);function i(){let e=(0,n.useContext)(o);if(!e)throw Error("useToast must be used within ToastProvider");return e}function l(e){let{children:t}=e,[r,i]=(0,n.useState)([]),l=(0,n.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",r=Math.random().toString(36).substr(2,9);i(s=>[...s,{id:r,message:e,type:t}])},[]),c=(0,n.useCallback)(e=>{i(t=>t.filter(t=>t.id!==e))},[]);return(0,s.jsxs)(o.Provider,{value:{showToast:l},children:[t,(0,s.jsx)("div",{className:"fixed top-4 right-4 z-50 flex flex-col gap-2 pointer-events-none",children:r.map(e=>(0,s.jsx)("div",{className:"pointer-events-auto",children:(0,s.jsx)(a.Z,{message:e.message,type:e.type,isVisible:!0,onClose:()=>c(e.id)})},e.id))})]})}},826:function(e,t,r){r.d(t,{x:function(){return a}});let s=r(2601).env.NEXT_PUBLIC_API_URL||"https://stationary-server-alpha.vercel.app/api";class n{async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="".concat(this.baseUrl).concat(e),s={"Content-Type":"application/json",...t.headers};this.token&&(s.Authorization="Bearer ".concat(this.token));try{let e=await fetch(r,{...t,headers:s}),n=await e.json();if(!e.ok)return{error:n.error||"Request failed"};return{data:n}}catch(e){return{error:e instanceof Error?e.message:"Network error"}}}async login(e,t){let r=await this.request("/auth/login",{method:"POST",body:JSON.stringify({email:e,password:t})});return r.data&&(localStorage.setItem("accessToken",r.data.accessToken),localStorage.setItem("refreshToken",r.data.refreshToken),this.token=r.data.accessToken),r}async register(e,t,r){let s=await this.request("/auth/register",{method:"POST",body:JSON.stringify({name:e,email:t,password:r})});return s.data&&(localStorage.setItem("accessToken",s.data.accessToken),localStorage.setItem("refreshToken",s.data.refreshToken),this.token=s.data.accessToken),s}logout(){localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),this.token=null}async getProducts(e){let t=new URLSearchParams;(null==e?void 0:e.categoryId)&&t.append("categoryId",e.categoryId),(null==e?void 0:e.search)&&t.append("search",e.search),(null==e?void 0:e.page)&&t.append("page",e.page.toString()),(null==e?void 0:e.limit)&&t.append("limit",e.limit.toString());let r=t.toString();return this.request("/products".concat(r?"?".concat(r):""))}async getProduct(e){return this.request("/products/".concat(e))}async getCategories(e){return this.request("/categories".concat(e?"?parentId=".concat(e):""))}async createOrder(e){return this.request("/orders",{method:"POST",body:JSON.stringify(e)})}async getOrders(){return this.request("/orders")}async getOrder(e){return this.request("/orders/".concat(e))}async getAddresses(){return this.request("/users/addresses")}async createAddress(e){return this.request("/users/addresses",{method:"POST",body:JSON.stringify(e)})}constructor(e){this.token=null,this.baseUrl=e,this.token=localStorage.getItem("accessToken")}}let a=new n(s)},5131:function(e,t,r){function s(e){return function(e){let t="string"==typeof e?parseFloat(e):e;return isNaN(t)?"PKR 0":"PKR ".concat(t.toFixed(2))}(e)}r.d(t,{tp:function(){return n},xG:function(){return s}});let n="PKR "},9110:function(e,t,r){r.d(t,{$f:function(){return a},Mp:function(){return n},QY:function(){return o},id:function(){return i},sA:function(){return s}});let s=()=>{let e=localStorage.getItem("wishlist");return e?JSON.parse(e):[]},n=e=>{let t=s();return!t.some(t=>t.id===e.id)&&(t.push(e),localStorage.setItem("wishlist",JSON.stringify(t)),window.dispatchEvent(new Event("wishlistUpdated")),!0)},a=e=>{let t=s().filter(t=>t.id!==e);return localStorage.setItem("wishlist",JSON.stringify(t)),window.dispatchEvent(new Event("wishlistUpdated")),!0},o=e=>s().some(t=>t.id===e),i=()=>s().length}}]);