"use strict";exports.id=289,exports.ids=[289],exports.modules={1289:(e,t,s)=>{s.d(t,{Z:()=>u});var r=s(5344),a=s(783),i=s.n(a),l=s(3729),n=s(7361),o=s(6055),d=s(8117),c=s(3098);function x({productId:e,isOpen:t,onClose:s}){let[a,x]=(0,l.useState)(null),[h,u]=(0,l.useState)([]),[m,g]=(0,l.useState)(null),[p,y]=(0,l.useState)(""),[f,v]=(0,l.useState)(1),[b,j]=(0,l.useState)(!1),{showToast:w}=(0,n.p)();(0,l.useEffect)(()=>{t&&e&&N()},[t,e]);let N=async()=>{j(!0);try{let t=await d.x.getProduct(e);if(t.data){x(t.data.product);let e=t.data.variants||[];u(e),e.length>0&&(g(e[0]),y(e[0]?.images?.[0]||""))}}catch(e){console.error("Failed to load product:",e),w("Failed to load product","error")}finally{j(!1)}};if(!a)return r.jsx(o.Z,{isOpen:t,onClose:s,size:"lg",children:r.jsx("div",{className:"flex items-center justify-center py-12",children:b?(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"Loading product..."})]}):r.jsx("div",{className:"text-center",children:r.jsx("p",{className:"text-gray-600",children:"Product not found"})})})});let k=p||h[0]?.images?.[0]||"",L=m?.price||h[0]?.price||0;return r.jsx(o.Z,{isOpen:t,onClose:s,size:"xl",showCloseButton:!0,children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsx("div",{className:"aspect-square bg-gray-100 rounded-lg overflow-hidden",children:k?r.jsx("img",{src:k,alt:a.name,className:"w-full h-full object-cover"}):r.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:r.jsx("svg",{className:"w-20 h-20",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})})}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:a.name}),a.brand&&(0,r.jsxs)("p",{className:"text-sm text-gray-600 mb-2",children:["Brand: ",a.brand]}),a.categoryId&&(0,r.jsxs)("p",{className:"text-sm text-gray-600 mb-4",children:["Category: ",a.categoryId.name]})]}),r.jsx("div",{className:"flex items-center gap-4",children:r.jsx("span",{className:"text-3xl font-bold text-gray-900",children:(0,c.xG)(L)})}),a.shortDescription&&r.jsx("div",{children:r.jsx("p",{className:"text-gray-700 leading-relaxed",children:a.shortDescription})}),h.length>1&&(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Variant"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:h.map(e=>(0,r.jsxs)("button",{onClick:()=>{g(e),y(e.images?.[0]||"")},className:`px-4 py-2 rounded-lg border transition-colors ${m?._id===e._id?"border-gray-900 bg-gray-900 text-white":"border-gray-300 text-gray-700 hover:border-gray-900"}`,children:[(0,c.xG)(e.price),e.sku&&` - ${e.sku}`]},e._id))})]}),a.isBundle&&a.bundleItems&&a.bundleItems.length>0&&(0,r.jsxs)("div",{className:"border-t pt-4",children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"This set includes:"}),r.jsx("ul",{className:"list-disc list-inside space-y-1 text-sm text-gray-600",children:a.bundleItems.map((e,t)=>(0,r.jsxs)("li",{children:[e.name," ",e.quantity>1&&`(x${e.quantity})`]},t))})]}),h.length>0&&(0,r.jsxs)("div",{className:"space-y-4 pt-4 border-t",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[r.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Quantity:"}),(0,r.jsxs)("div",{className:"flex items-center border border-gray-300 rounded-lg",children:[r.jsx("button",{onClick:()=>v(Math.max(1,f-1)),className:"px-3 py-2 text-gray-600 hover:text-gray-900",children:"âˆ’"}),r.jsx("span",{className:"px-4 py-2 border-x border-gray-300 min-w-[60px] text-center",children:f}),r.jsx("button",{onClick:()=>v(f+1),className:"px-3 py-2 text-gray-600 hover:text-gray-900",children:"+"})]})]}),(0,r.jsxs)("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>{if(!m||!a)return;let e=JSON.parse(localStorage.getItem("cart")||"[]"),t={id:`${a._id}-${m._id}`,productId:a._id,variantId:m._id,name:a.name,price:(0,c.xG)(m.price),image:p,quantity:f,variant:m},s=e.findIndex(e=>e.id===t.id);s>=0?e[s].quantity+=f:e.push(t),localStorage.setItem("cart",JSON.stringify(e)),window.dispatchEvent(new Event("cartUpdated")),w("Added to cart!","success")},className:"flex-1 bg-gray-900 text-white px-6 py-3 rounded-lg font-semibold hover:bg-primary transition-colors",children:"Add to Cart"}),r.jsx(i(),{href:`/products/${e}`,onClick:s,className:"px-6 py-3 border border-gray-900 text-gray-900 rounded-lg font-semibold hover:bg-gray-50 transition-colors",children:"View Details"})]})]})]})]})})}var h=s(631);function u({id:e,name:t,price:s,image:a,brand:o,labels:d=[],buttonText:c="Add",isOutOfStock:u=!1,href:m,productId:g,rating:p=4.5,reviewCount:y=12}){let[f,v]=(0,l.useState)(!1),[b,j]=(0,l.useState)(!1),[w,N]=(0,l.useState)(!1),k=m||`/products/${e}`,L=g||e,{showToast:S}=(0,n.p)();return(0,l.useEffect)(()=>{N((0,h.QY)(L));let e=()=>{N((0,h.QY)(L))};return window.addEventListener("wishlistUpdated",e),()=>window.removeEventListener("wishlistUpdated",e)},[L]),(0,r.jsxs)(r.Fragment,{children:[r.jsx(i(),{href:k,className:"block group h-full",children:(0,r.jsxs)("div",{className:"relative bg-white rounded-lg overflow-hidden shadow-sm hover:shadow-lg transition-all duration-300 border border-gray-100 aspect-[9/16] flex flex-col h-full",onMouseEnter:()=>v(!0),onMouseLeave:()=>v(!1),children:[(0,r.jsxs)("div",{className:"relative aspect-[3/4] bg-gray-50 overflow-hidden flex-shrink-0 p-2",children:[a?(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:"w-full h-full bg-contain bg-center bg-no-repeat transition-transform duration-700 group-hover:scale-105",style:{backgroundImage:`url(${a})`}}),(0,r.jsxs)("div",{className:`absolute top-1.5 right-1.5 flex flex-col gap-1.5 z-20 transition-all duration-300 ${f||w?"opacity-100 translate-x-0":"lg:opacity-0 lg:translate-x-2"}`,children:[r.jsx("button",{onClick:e=>{e.preventDefault(),e.stopPropagation(),w?((0,h.$f)(L),S("Removed from wishlist","success")):(0,h.Mp)({id:L,name:t,price:s,image:a,productId:L})?S("Added to wishlist","success"):S("Already in wishlist","info")},className:`p-1.5 rounded-full shadow-sm transition-all duration-300 ${w?"bg-red-50 text-red-500 hover:bg-red-100":"bg-white/90 backdrop-blur-sm text-gray-500 hover:bg-white hover:text-red-500 hover:shadow-md"}`,title:w?"Remove from Wishlist":"Add to Wishlist",children:r.jsx("svg",{className:`w-4 h-4 ${w?"fill-current":"fill-none stroke-current stroke-2"}`,viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})}),r.jsx("button",{onClick:e=>{e.preventDefault(),e.stopPropagation(),j(!0)},className:"p-1.5 rounded-full shadow-sm bg-white/90 backdrop-blur-sm text-gray-500 hover:bg-gray-900 hover:text-white transition-all duration-300",title:"Quick View",children:(0,r.jsxs)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),d.length>0&&r.jsx("div",{className:"absolute top-1.5 left-1.5 flex flex-col gap-1 z-10",children:d.map((e,t)=>{let s=e.toLowerCase(),a="bg-gray-900";return s.includes("sale")?a="bg-red-500":s.includes("new")&&(a="bg-blue-600"),r.jsx("span",{className:`${a} text-white text-[10px] font-bold px-1.5 py-0.5 rounded shadow-sm uppercase tracking-wider`,children:e},t)})})]}):r.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-300",children:r.jsx("svg",{className:"w-12 h-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),u&&r.jsx("div",{className:"absolute inset-0 bg-white/60 flex items-center justify-center z-10",children:r.jsx("span",{className:"bg-gray-900 text-white text-[10px] font-bold px-2 py-0.5 rounded-full uppercase tracking-wider",children:"Out of Stock"})})]}),(0,r.jsxs)("div",{className:"p-3 flex-1 flex flex-col justify-between overflow-hidden",children:[(0,r.jsxs)("div",{children:[o&&r.jsx("div",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-0.5",children:o}),r.jsx("h3",{className:"text-sm font-semibold text-gray-900 leading-tight line-clamp-2 h-10 group-hover:text-primary transition-colors mb-1.5 uppercase",children:t}),(0,r.jsxs)("div",{className:"flex items-center gap-1.5 mb-1",children:[r.jsx("div",{className:"flex items-center space-x-0.5 text-yellow-400",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>r.jsx("svg",{className:`w-3.5 h-3.5 ${t<Math.floor(p)?"fill-current":"text-gray-300 fill-current"}`,viewBox:"0 0 20 20",children:r.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},t))}),(0,r.jsxs)("span",{className:"text-[10px] text-gray-400",children:["(",y,")"]})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between mt-auto",children:[r.jsx("div",{className:"text-base font-bold text-gray-900",children:s}),r.jsx("button",{onClick:r=>{if(r.preventDefault(),r.stopPropagation(),u)S("This product is out of stock","warning");else{let r=JSON.parse(localStorage.getItem("cart")||"[]"),i=r.find(t=>t.id===e);i?(i.quantity+=1,S(`${t} quantity updated`,"success")):(r.push({id:e,name:t,price:s,image:a,quantity:1}),S(`${t} added to cart`,"success")),localStorage.setItem("cart",JSON.stringify(r)),window.dispatchEvent(new Event("cartUpdated"))}},disabled:u,className:`p-2 rounded-full transition-all duration-300 ${u?"bg-gray-50 text-gray-200":"bg-gray-50 text-gray-900 hover:bg-primary hover:text-white hover:shadow-md"}`,title:c,children:r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})})})]})]})]})}),r.jsx(x,{productId:L,isOpen:b,onClose:()=>j(!1)})]})}},6055:(e,t,s)=>{s.d(t,{Z:()=>i});var r=s(5344),a=s(3729);function i({isOpen:e,onClose:t,title:s,children:i,size:l="md",showCloseButton:n=!0}){return((0,a.useEffect)(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[e]),(0,a.useEffect)(()=>{let s=s=>{"Escape"===s.key&&e&&t()};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[e,t]),e)?r.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",onClick:t,children:(0,r.jsxs)("div",{className:"flex min-h-screen items-center justify-center p-4",children:[r.jsx("div",{className:"fixed inset-0 bg-black/50 transition-opacity",onClick:t}),(0,r.jsxs)("div",{className:`
            relative bg-white rounded-xl shadow-2xl w-full ${{sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"}[l]}
            transform transition-all animate-fadeIn
          `,onClick:e=>e.stopPropagation(),children:[(s||n)&&(0,r.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[s&&r.jsx("h2",{className:"text-xl font-bold text-gray-900",children:s}),n&&r.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors p-1 rounded-lg hover:bg-gray-100","aria-label":"Close modal",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r.jsx("div",{className:"p-6",children:i})]})]})}):null}},8117:(e,t,s)=>{s.d(t,{x:()=>i});let r=process.env.NEXT_PUBLIC_API_URL||"https://stationary-server-alpha.vercel.app/api";class a{constructor(e){this.token=null,this.baseUrl=e}async request(e,t={}){let s=`${this.baseUrl}${e}`,r={"Content-Type":"application/json",...t.headers};this.token&&(r.Authorization=`Bearer ${this.token}`);try{let e=await fetch(s,{...t,headers:r}),a=await e.json();if(!e.ok)return{error:a.error||"Request failed"};return{data:a}}catch(e){return{error:e instanceof Error?e.message:"Network error"}}}async login(e,t){let s=await this.request("/auth/login",{method:"POST",body:JSON.stringify({email:e,password:t})});return s.data,s}async register(e,t,s){let r=await this.request("/auth/register",{method:"POST",body:JSON.stringify({name:e,email:t,password:s})});return r.data,r}logout(){}async getProducts(e){let t=new URLSearchParams;e?.categoryId&&t.append("categoryId",e.categoryId),e?.search&&t.append("search",e.search),e?.page&&t.append("page",e.page.toString()),e?.limit&&t.append("limit",e.limit.toString());let s=t.toString();return this.request(`/products${s?`?${s}`:""}`)}async getProduct(e){return this.request(`/products/${e}`)}async getCategories(e){let t=e?`?parentId=${e}`:"";return this.request(`/categories${t}`)}async createOrder(e){return this.request("/orders",{method:"POST",body:JSON.stringify(e)})}async getOrders(){return this.request("/orders")}async getOrder(e){return this.request(`/orders/${e}`)}async getAddresses(){return this.request("/users/addresses")}async createAddress(e){return this.request("/users/addresses",{method:"POST",body:JSON.stringify(e)})}}let i=new a(r)},3098:(e,t,s)=>{function r(e){return function(e){let t="string"==typeof e?parseFloat(e):e;return isNaN(t)?"PKR 0":`PKR ${t.toFixed(2)}`}(e)}s.d(t,{tp:()=>a,xG:()=>r});let a="PKR "}};