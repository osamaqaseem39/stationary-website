"use strict";exports.id=289,exports.ids=[289],exports.modules={1289:(e,t,s)=>{s.d(t,{Z:()=>h});var r=s(5344),a=s(783),i=s.n(a),n=s(3729),l=s(7361),o=s(6055),d=s(8117),c=s(3098);function x({productId:e,isOpen:t,onClose:s}){let[a,x]=(0,n.useState)(null),[u,h]=(0,n.useState)([]),[m,g]=(0,n.useState)(null),[p,y]=(0,n.useState)(""),[f,v]=(0,n.useState)(1),[b,j]=(0,n.useState)(!1),{showToast:w}=(0,l.p)();(0,n.useEffect)(()=>{t&&e&&N()},[t,e]);let N=async()=>{j(!0);try{let t=await d.x.getProduct(e);if(t.data){x(t.data.product);let e=t.data.variants||[];h(e),e.length>0&&(g(e[0]),y(e[0]?.images?.[0]||""))}}catch(e){console.error("Failed to load product:",e),w("Failed to load product","error")}finally{j(!1)}};if(!a)return r.jsx(o.Z,{isOpen:t,onClose:s,size:"lg",children:r.jsx("div",{className:"flex items-center justify-center py-12",children:b?(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"Loading product..."})]}):r.jsx("div",{className:"text-center",children:r.jsx("p",{className:"text-gray-600",children:"Product not found"})})})});let k=p||u[0]?.images?.[0]||"",S=m?.price||u[0]?.price||0;return r.jsx(o.Z,{isOpen:t,onClose:s,size:"xl",showCloseButton:!0,children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsx("div",{className:"aspect-square bg-gray-100 rounded-lg overflow-hidden",children:k?r.jsx("img",{src:k,alt:a.name,className:"w-full h-full object-cover"}):r.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:r.jsx("svg",{className:"w-20 h-20",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})})}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:a.name}),a.brand&&(0,r.jsxs)("p",{className:"text-sm text-gray-600 mb-2",children:["Brand: ",a.brand]}),a.categoryId&&(0,r.jsxs)("p",{className:"text-sm text-gray-600 mb-4",children:["Category: ",a.categoryId.name]})]}),r.jsx("div",{className:"flex items-center gap-4",children:r.jsx("span",{className:"text-3xl font-bold text-gray-900",children:(0,c.xG)(S)})}),a.shortDescription&&r.jsx("div",{children:r.jsx("p",{className:"text-gray-700 leading-relaxed",children:a.shortDescription})}),u.length>1&&(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Variant"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:u.map(e=>(0,r.jsxs)("button",{onClick:()=>{g(e),y(e.images?.[0]||"")},className:`px-4 py-2 rounded-lg border transition-colors ${m?._id===e._id?"border-gray-900 bg-gray-900 text-white":"border-gray-300 text-gray-700 hover:border-gray-900"}`,children:[(0,c.xG)(e.price),e.sku&&` - ${e.sku}`]},e._id))})]}),a.isBundle&&a.bundleItems&&a.bundleItems.length>0&&(0,r.jsxs)("div",{className:"border-t pt-4",children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"This set includes:"}),r.jsx("ul",{className:"list-disc list-inside space-y-1 text-sm text-gray-600",children:a.bundleItems.map((e,t)=>(0,r.jsxs)("li",{children:[e.name," ",e.quantity>1&&`(x${e.quantity})`]},t))})]}),u.length>0&&(0,r.jsxs)("div",{className:"space-y-4 pt-4 border-t",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[r.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Quantity:"}),(0,r.jsxs)("div",{className:"flex items-center border border-gray-300 rounded-lg",children:[r.jsx("button",{onClick:()=>v(Math.max(1,f-1)),className:"px-3 py-2 text-gray-600 hover:text-gray-900",children:"âˆ’"}),r.jsx("span",{className:"px-4 py-2 border-x border-gray-300 min-w-[60px] text-center",children:f}),r.jsx("button",{onClick:()=>v(f+1),className:"px-3 py-2 text-gray-600 hover:text-gray-900",children:"+"})]})]}),(0,r.jsxs)("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>{if(!m||!a)return;let e=JSON.parse(localStorage.getItem("cart")||"[]"),t={id:`${a._id}-${m._id}`,productId:a._id,variantId:m._id,name:a.name,price:(0,c.xG)(m.price),image:p,quantity:f,variant:m},s=e.findIndex(e=>e.id===t.id);s>=0?e[s].quantity+=f:e.push(t),localStorage.setItem("cart",JSON.stringify(e)),window.dispatchEvent(new Event("cartUpdated")),w("Added to cart!","success")},className:"flex-1 bg-gray-900 text-white px-6 py-3 rounded-lg font-semibold hover:bg-primary transition-colors",children:"Add to Cart"}),r.jsx(i(),{href:`/products/${e}`,onClick:s,className:"px-6 py-3 border border-gray-900 text-gray-900 rounded-lg font-semibold hover:bg-gray-50 transition-colors",children:"View Details"})]})]})]})]})})}var u=s(631);function h({id:e,name:t,price:s,image:a,labels:o=[],buttonText:d="Add",isOutOfStock:c=!1,href:h,productId:m,rating:g=4.5,reviewCount:p=12}){let[y,f]=(0,n.useState)(!1),[v,b]=(0,n.useState)(!1),[j,w]=(0,n.useState)(!1),N=h||`/products/${e}`,k=m||e,{showToast:S}=(0,l.p)();return(0,n.useEffect)(()=>{w((0,u.QY)(k));let e=()=>{w((0,u.QY)(k))};return window.addEventListener("wishlistUpdated",e),()=>window.removeEventListener("wishlistUpdated",e)},[k]),(0,r.jsxs)(r.Fragment,{children:[r.jsx(i(),{href:N,className:"block group",children:(0,r.jsxs)("div",{className:"relative bg-white rounded-xl overflow-hidden shadow-sm hover:shadow-xl transition-all duration-300 border border-gray-100",onMouseEnter:()=>f(!0),onMouseLeave:()=>f(!1),children:[(0,r.jsxs)("div",{className:"relative aspect-[3/4] bg-gray-50 overflow-hidden",children:[a?(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:"w-full h-full bg-cover bg-center transition-transform duration-700 group-hover:scale-110",style:{backgroundImage:`url(${a})`}}),r.jsx("button",{onClick:e=>{e.preventDefault(),e.stopPropagation(),j?((0,u.$f)(k),S("Removed from wishlist","success")):(0,u.Mp)({id:k,name:t,price:s,image:a,productId:k})?S("Added to wishlist","success"):S("Already in wishlist","info")},className:`absolute top-2 right-2 p-2 rounded-full transition-all duration-300 z-20 ${j?"bg-red-50 text-red-500 hover:bg-red-100":"bg-white/80 backdrop-blur-sm text-gray-500 hover:bg-white hover:text-red-500 hover:shadow-md"} ${j||y?"opacity-100 translate-x-0":"lg:opacity-0 lg:translate-x-2"}`,title:j?"Remove from Wishlist":"Add to Wishlist",children:r.jsx("svg",{className:`w-4 h-4 ${j?"fill-current":"fill-none stroke-current stroke-2"}`,viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})}),r.jsx("div",{className:`absolute inset-0 flex items-center justify-center pointer-events-none transition-opacity duration-300 ${y?"opacity-100":"opacity-0"}`,children:r.jsx("div",{onClick:e=>{e.preventDefault(),e.stopPropagation(),b(!0)},className:"pointer-events-auto cursor-pointer bg-white text-gray-900 px-4 py-2 rounded-full font-semibold shadow-lg hover:bg-gray-900 hover:text-white transition-colors transform hover:scale-105 active:scale-95 text-xs tracking-wide uppercase",children:"Quick View"})}),o.length>0&&r.jsx("div",{className:"absolute top-2 left-2 flex flex-col gap-1 z-10",children:o.map((e,t)=>{let s=e.toLowerCase(),a="bg-gray-900";return s.includes("sale")?a="bg-red-500":s.includes("new")?a="bg-blue-600":s.includes("limited")&&(a="bg-purple-600"),r.jsx("span",{className:`${a} text-white text-[10px] font-bold px-2 py-0.5 rounded shadow-sm uppercase tracking-wider`,children:e},t)})})]}):r.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-300",children:r.jsx("svg",{className:"w-12 h-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),c&&r.jsx("div",{className:"absolute inset-0 bg-white/60 flex items-center justify-center z-10",children:r.jsx("span",{className:"bg-gray-900 text-white text-xs font-bold px-3 py-1 rounded-full uppercase tracking-wider",children:"Out of Stock"})})]}),(0,r.jsxs)("div",{className:"p-3",children:[r.jsx("div",{className:"flex justify-between items-start gap-2 mb-1",children:r.jsx("h3",{className:"text-sm font-medium text-gray-900 leading-tight line-clamp-2 group-hover:text-primary transition-colors",children:t})}),(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("div",{className:"flex items-center space-x-0.5 text-yellow-400",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>r.jsx("svg",{className:`w-3 h-3 ${t<Math.floor(g)?"fill-current":"text-gray-300 fill-current"}`,viewBox:"0 0 20 20",children:r.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},t))}),(0,r.jsxs)("span",{className:"text-[10px] text-gray-400",children:["(",p,")"]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between mt-2",children:[r.jsx("div",{className:"text-base font-bold text-gray-900",children:s}),r.jsx("button",{onClick:r=>{if(r.preventDefault(),r.stopPropagation(),c)S("This product is out of stock","warning");else{let r=JSON.parse(localStorage.getItem("cart")||"[]"),i=r.find(t=>t.id===e);i?(i.quantity+=1,S(`${t} quantity updated`,"success")):(r.push({id:e,name:t,price:s,image:a,quantity:1}),S(`${t} added to cart`,"success")),localStorage.setItem("cart",JSON.stringify(r)),window.dispatchEvent(new Event("cartUpdated"))}},disabled:c,className:`p-2 rounded-full transition-all duration-300 ${c?"bg-gray-100 text-gray-300":"bg-gray-100 text-gray-900 hover:bg-primary hover:text-white hover:shadow-lg hover:-translate-y-0.5"}`,title:d,children:r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})})})]})]})]})}),r.jsx(x,{productId:k,isOpen:v,onClose:()=>b(!1)})]})}},6055:(e,t,s)=>{s.d(t,{Z:()=>i});var r=s(5344),a=s(3729);function i({isOpen:e,onClose:t,title:s,children:i,size:n="md",showCloseButton:l=!0}){return((0,a.useEffect)(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[e]),(0,a.useEffect)(()=>{let s=s=>{"Escape"===s.key&&e&&t()};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[e,t]),e)?r.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",onClick:t,children:(0,r.jsxs)("div",{className:"flex min-h-screen items-center justify-center p-4",children:[r.jsx("div",{className:"fixed inset-0 bg-black/50 transition-opacity",onClick:t}),(0,r.jsxs)("div",{className:`
            relative bg-white rounded-xl shadow-2xl w-full ${{sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"}[n]}
            transform transition-all animate-fadeIn
          `,onClick:e=>e.stopPropagation(),children:[(s||l)&&(0,r.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[s&&r.jsx("h2",{className:"text-xl font-bold text-gray-900",children:s}),l&&r.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors p-1 rounded-lg hover:bg-gray-100","aria-label":"Close modal",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r.jsx("div",{className:"p-6",children:i})]})]})}):null}},8117:(e,t,s)=>{s.d(t,{x:()=>i});let r=process.env.NEXT_PUBLIC_API_URL||"https://stationary-server-alpha.vercel.app/api";class a{constructor(e){this.token=null,this.baseUrl=e}async request(e,t={}){let s=`${this.baseUrl}${e}`,r={"Content-Type":"application/json",...t.headers};this.token&&(r.Authorization=`Bearer ${this.token}`);try{let e=await fetch(s,{...t,headers:r}),a=await e.json();if(!e.ok)return{error:a.error||"Request failed"};return{data:a}}catch(e){return{error:e instanceof Error?e.message:"Network error"}}}async login(e,t){let s=await this.request("/auth/login",{method:"POST",body:JSON.stringify({email:e,password:t})});return s.data,s}async register(e,t,s){let r=await this.request("/auth/register",{method:"POST",body:JSON.stringify({name:e,email:t,password:s})});return r.data,r}logout(){}async getProducts(e){let t=new URLSearchParams;e?.categoryId&&t.append("categoryId",e.categoryId),e?.search&&t.append("search",e.search),e?.page&&t.append("page",e.page.toString()),e?.limit&&t.append("limit",e.limit.toString());let s=t.toString();return this.request(`/products${s?`?${s}`:""}`)}async getProduct(e){return this.request(`/products/${e}`)}async getCategories(e){let t=e?`?parentId=${e}`:"";return this.request(`/categories${t}`)}async createOrder(e){return this.request("/orders",{method:"POST",body:JSON.stringify(e)})}async getOrders(){return this.request("/orders")}async getOrder(e){return this.request(`/orders/${e}`)}async getAddresses(){return this.request("/users/addresses")}async createAddress(e){return this.request("/users/addresses",{method:"POST",body:JSON.stringify(e)})}}let i=new a(r)},3098:(e,t,s)=>{function r(e){return function(e){let t="string"==typeof e?parseFloat(e):e;return isNaN(t)?"PKR 0":`PKR ${t.toFixed(2)}`}(e)}s.d(t,{tp:()=>a,xG:()=>r});let a="PKR "}};